trigger:
  - main

pool:
  name: Default

steps:
  - checkout: self
    clean: true

  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.10'
    displayName: 'Use Python 3.10'

  - script: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt
      pip install pytest
    displayName: 'Install dependencies'

  - script: ls -l tests
    displayName: 'List tests directory contents'

  - script: pytest tests/
    displayName: 'Run tests'
